# プレゼンタースクリプト（説明台本）

このドキュメントは、ハンズオンを進行するプレゼンター向けの説明スクリプト（台本）です。  
各モジュールで話す内容のガイドラインを提供します。

---

## 🎤 オープニング（5分）

### 自己紹介後

> 「本日は Zero to Snowflake ハンズオンにご参加いただき、ありがとうございます。
> 
> このハンズオンでは、架空のフードトラック企業『Tasty Bytes』のデータを使って、Snowflakeの基本機能から高度なAI機能、ガバナンスまでを体験していただきます。
> 
> 全部で5つのモジュールがあり、約3.5時間を予定しています。途中で休憩も入れますので、リラックスして進めていきましょう。」

### 環境確認

> 「まず、皆さんのSnowflake環境を確認させてください。
> 
> Snowsightにログインできていますか？左下でACCOUNTADMINロールが選択できることを確認してください。
> 
> 問題がある方は手を挙げてください。」

---

## 📦 Module 00: セットアップ（15分）

### 導入

> 「それでは、まずハンズオン環境のセットアップから始めます。
> 
> このセットアップでは、データベース、スキーマ、ウェアハウス、ロールを作成し、S3からサンプルデータをロードします。
> 
> 約6,200万件の注文データをロードしますので、10〜15分ほどかかります。」

### 実行指示

> 「`00_setup`フォルダの`setup.sql`を開いてください。
> 
> 全体を選択して実行します。Macの方はCommand+A、Windowsの方はCtrl+Aで全選択できます。
> 
> 実行ボタンを押すか、Command+Enter（Ctrl+Enter）で実行してください。」

### 待ち時間の説明

> 「データロード中に、今日使うデータについて少し説明します。
> 
> Tasty Bytesは架空のフードトラック企業で、15カ国30都市以上で450台以上のトラックを運営しています。
> 
> 2019年から2022年までの注文データ、顧客データ、レビューデータを使って、実際のビジネスシナリオを体験します。」

### 完了確認

> 「セットアップが完了すると、最後に『✅ セットアップが完了しました！』というメッセージが表示されます。これが出れば準備完了です。」

---

## 🚀 Module 01: Snowflakeを始める（45分）

### 導入

> 「最初のモジュールでは、Snowflakeの基本操作を学びます。
> 
> ウェアハウスの作成とスケーリング、クエリキャッシュ、ゼロコピークローン、Time Travelなど、Snowflakeならではの機能を体験します。」

### セクション1: ウェアハウス（10分）

> 「まず、ウェアハウスを作成します。Snowflakeのウェアハウスは、コンピュートリソースの単位です。
> 
> 【ポイント】ストレージとコンピュートが分離されているのがSnowflakeの大きな特徴です。
> 
> サイズはX-SmallからX6-Largeまであり、サイズが上がるごとにコンピュートパワーとコストが2倍になります。」

**デモ**: ウェアハウス作成 → サイズ変更 → クエリ実行

> 「ウェアハウスのサイズを変更してみましょう。ALTER WAREHOUSEで簡単に変更できます。
> 
> 【ポイント】実行中でもサイズ変更可能です。これがSnowflakeの弾力性です。」

### セクション2: クエリキャッシュ（5分）

> 「同じクエリを2回実行してみてください。2回目は劇的に速くなったはずです。
> 
> これがクエリ結果キャッシュです。24時間保持され、ウェアハウス間で共有されます。
> 
> 【ポイント】ダッシュボードやレポートで同じクエリが繰り返される場合、コスト削減に非常に効果的です。」

### セクション3: ゼロコピークローン（10分）

> 「次に、ゼロコピークローンを体験します。
> 
> これは、追加ストレージなしでテーブルの完全なコピーを即座に作成する機能です。
> 
> 【ポイント】開発環境の作成、テスト、バックアップに最適です。変更があった部分だけ新しいストレージが使われます。」

**デモ**: CLONE → UPDATE → SWAP

### セクション4: UNDROP（5分）

> 「さて、ここで『事故』を起こしてみましょう。テーブルを削除します。
> 
> 【ドラマチックに】あ！間違って本番テーブルを消してしまいました！
> 
> でも大丈夫です。UNDROPで復元できます。これがSnowflakeのTime Travel機能です。
> 
> 【ポイント】デフォルトで24時間、設定次第で90日まで遡れます。」

### セクション5: リソースモニターと予算（10分）

> 「最後に、コスト管理について学びます。
> 
> クラウドでは使った分だけ課金されます。リソースモニターと予算を使って、支出を監視・制限できます。
> 
> 【ポイント】本番環境では必ず設定してください。想定外のコストを防げます。」

### セクション6: ユニバーサル検索（5分）

> 「Snowsightの検索機能を使ってみましょう。『truck』と検索してみてください。
> 
> テーブル、ビュー、さらにはMarketplaceのデータやドキュメントまで検索できます。
> 
> 自然言語でも検索できます。試しに『Which truck has the most sales?』と入れてみてください。」

---

## 🔄 Module 02: データパイプライン（45分）

### 導入

> 「次のモジュールでは、データパイプラインを構築します。
> 
> 外部ステージからのデータ取り込み、半構造化データの操作、そしてDynamic Tablesによる宣言的ETLを学びます。」

### セクション1: 外部ステージ（10分）

> 「まず、S3からデータを取り込みます。Snowflakeでは、S3、Azure Blob、GCSから直接データをロードできます。
> 
> ステージを作成して、COPY INTOコマンドでデータをロードします。」

### セクション2: 半構造化データ（15分）

> 「menu_stagingテーブルを見てください。`menu_item_health_metrics_obj`列にJSONデータが入っています。
> 
> Snowflakeでは、VARIANTデータ型でJSONを直接格納・クエリできます。
> 
> 【ポイント】コロン演算子（:）でキーにアクセス、角括弧（[]）で配列にアクセスします。
> 
> FLATTEN関数を使うと、配列を展開して行に変換できます。」

**デモ**: VARIANT → コロン演算子 → FLATTEN

### セクション3: Dynamic Tables（15分）

> 「ここからがハイライトです。Dynamic Tablesを作成します。
> 
> Dynamic Tablesは、SQLクエリで定義するだけで、自動的に更新される実体化ビューのようなものです。
> 
> 【ポイント】『何を』だけ定義すれば、『いつ・どのように』更新するかはSnowflakeが管理します。
> 
> LAG設定で鮮度を指定します。1 minuteなら、最大1分の遅延で最新データが反映されます。」

**デモ**: Dynamic Table作成 → INSERT → 自動更新確認

> 「新しいメニューアイテムを追加してみましょう。最大1分待つと、Dynamic Tableに自動的に反映されます。」

### セクション4: DAG確認（5分）

> 「最後に、Snowsightでパイプラインを可視化します。カタログからDynamic Tableを選択し、『グラフ』タブを開いてください。
> 
> これがDAG（有向非巡回グラフ）です。依存関係が一目でわかります。」

---

## 🤖 Module 03: Cortex AI（30分）

### 導入

> 「このモジュールでは、Snowflake Cortex AIを使います。
> 
> SQLの中で直接AI関数を呼び出して、センチメント分析、分類、回答抽出、要約ができます。
> 
> 【ポイント】データをSnowflakeの外に出す必要がありません。セキュリティとガバナンスを維持したままAIを活用できます。」

### セクション1: SENTIMENT（8分）

> 「まず、SENTIMENT関数でレビューの感情を分析します。
> 
> -1がネガティブ、+1がポジティブです。0.5以上をポジティブ、-0.5以下をネガティブと分類します。
> 
> 【ポイント】1件ずつ手動で分析していたものが、数千件を一括処理できます。」

### セクション2: AI_CLASSIFY（8分）

> 「次に、AI_CLASSIFY関数でレビューをカテゴリ分類します。
> 
> 『Food Quality』『Service』『Pricing』など、自分で定義したカテゴリに自動分類されます。
> 
> 【ポイント】キーワードマッチングではなく、AIが文脈を理解して分類します。」

### セクション3: EXTRACT_ANSWER（7分）

> 「EXTRACT_ANSWER関数は、テキストから特定の質問への回答を抽出します。
> 
> 『具体的な苦情は何か？』と聞くと、レビューから該当部分を抜き出してくれます。
> 
> 【ポイント】長いテキストから必要な情報だけを取り出すのに最適です。」

### セクション4: AI_SUMMARIZE_AGG（7分）

> 「最後に、AI_SUMMARIZE_AGG関数で複数のレビューを要約します。
> 
> GROUP BYと組み合わせて、ブランドごとのレビュー要約を生成できます。
> 
> 【ポイント】エグゼクティブ向けのサマリーレポート作成に最適です。」

---

## 🔒 Module 04: ガバナンス（45分）

### 導入

> 「このモジュールでは、Snowflake Horizonを使ったデータガバナンスを学びます。
> 
> ロールベースアクセス制御、自動データ分類、マスキング、行アクセスポリシー、データ品質監視を体験します。
> 
> 【重要】このモジュールではロールを頻繁に切り替えます。常に現在のロールを意識してください。」

### セクション1: RBAC（10分）

> 「まず、カスタムロール`tb_data_steward`を作成します。
> 
> Snowflakeのセキュリティは、ロールに権限を付与し、ロールをユーザーに付与する形で管理します。
> 
> 【ポイント】最小権限の原則。必要な権限だけを付与しましょう。」

### セクション2: 自動タグ付け（10分）

> 「customer_loyaltyテーブルには個人情報が含まれています。名前、メール、電話番号など。
> 
> Snowflakeの自動分類機能で、これらの列を自動的に検出してPIIタグを付けます。
> 
> 【ポイント】手動でタグ付けする手間が省け、漏れも防げます。」

### セクション3: マスキングポリシー（10分）

> 「タグ付けした列にマスキングポリシーを適用します。
> 
> 権限のないロールでクエリすると、データが『****MASKED****』と表示されます。
> 
> 【ポイント】同じテーブルでも、ロールによって見えるデータが変わります。これが動的データマスキングです。」

**デモ**: publicロール → マスク確認 → tb_adminロール → 元データ確認

### セクション4: 行アクセスポリシー（10分）

> 「次に、行レベルのセキュリティを設定します。
> 
> tb_data_engineerロールは米国のデータのみ、管理者は全データが見えるようにします。
> 
> 【ポイント】同じテーブル、同じクエリでも、ロールによって返される行が異なります。」

### セクション5: DMFとトラストセンター（5分）

> 「データメトリック関数でデータ品質を監視できます。NULL率、重複チェック、カスタムルールなど。
> 
> トラストセンターでは、アカウント全体のセキュリティ状態を確認できます。
> 
> 時間があれば、トラストセンターの画面も見てみましょう。」

---

## 🌐 Module 05: アプリとコラボレーション（30分）

### 導入

> 「最後のモジュールでは、Snowflake Marketplaceを使います。
> 
> サードパーティのデータを取得して、自社データと組み合わせた分析を行います。
> 
> 【ポイント】データのコピーは発生しません。提供元のデータに直接アクセスします。常に最新データです。」

### セクション1: Marketplace（15分）

> 「Marketplaceで『Weather Source frostbyte』を検索してください。
> 
> 『Get』をクリックするだけで、天気データがアカウントに追加されます。
> 
> 【ポイント】ETLパイプラインを構築する必要がありません。数秒でデータにアクセスできます。」

**デモ**: Marketplace検索 → Get → 即座にクエリ

### セクション2: データ統合分析（15分）

> 「取得した天気データと、Tasty Bytesの売上データを組み合わせて分析します。
> 
> 『シアトルで雨の日の売上はどう変化するか？』こんな質問に答えられます。
> 
> 【ポイント】外部データを活用することで、これまでできなかった分析が可能になります。」

---

## 🎉 クロージング（5分）

### まとめ

> 「お疲れさまでした！本日のハンズオンで体験した内容をおさらいします。
> 
> - ウェアハウスの弾力的なスケーリング
> - Dynamic Tablesによる宣言的ETL
> - Cortex AIによるSQL内AI分析
> - Horizonによる包括的なガバナンス
> - Marketplaceによるデータコラボレーション
> 
> これらはすべて、Snowflakeの統合プラットフォームで実現できます。」

### 次のステップ

> 「さらに学習を続けたい方は、Snowflake Quickstartsをご覧ください。
> 
> 本日使用した資料はGitHubで公開しています。ぜひ社内での勉強会などにもご活用ください。」

### 質疑応答

> 「最後に、ご質問があればお受けします。」

---

## 💡 よく聞かれる質問への回答例

### Q: 料金体系は？

> 「Snowflakeは使った分だけの従量課金です。ストレージとコンピュートが別々に課金されます。
> ウェアハウスが停止中はコンピュート課金は発生しません。」

### Q: 他のクラウドDWHとの違いは？

> 「大きな違いは3つあります。
> 1. ストレージとコンピュートの完全分離
> 2. マルチクラウド対応（AWS, Azure, GCP）
> 3. データ共有機能（Marketplace, Data Sharing）」

### Q: セキュリティは大丈夫？

> 「Snowflakeはエンタープライズレベルのセキュリティを提供しています。
> データは常に暗号化され、今日体験したようなきめ細かいアクセス制御が可能です。
> SOC 2 Type II、HIPAA、PCI DSSなど各種認証も取得しています。」

### Q: 既存システムからの移行は？

> 「Snowflakeは標準SQLをサポートしているので、既存のSQLはほぼそのまま使えます。
> 専任のプロフェッショナルサービスチームが移行をサポートします。」

---

## 📋 タイムキープ用チェックリスト

- [ ] オープニング完了（開始後5分）
- [ ] セットアップ完了（開始後20分）
- [ ] Module 01完了（開始後65分）
- [ ] 休憩（10分）
- [ ] Module 02完了（開始後120分）
- [ ] Module 03完了（開始後150分）
- [ ] 休憩（10分）
- [ ] Module 04完了（開始後205分）
- [ ] Module 05完了（開始後235分）
- [ ] クロージング完了（開始後240分）

