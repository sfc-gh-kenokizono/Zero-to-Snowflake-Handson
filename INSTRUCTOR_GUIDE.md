# インストラクターガイド

このドキュメントは、Zero to Snowflake ハンズオンを実施するインストラクター向けのガイドです。

---

## 📋 ハンズオン実施前の準備

### 1. 環境確認（1週間前）

- [ ] 参加者全員がSnowflakeアカウントにアクセスできることを確認
- [ ] トライアルアカウントの場合、有効期限を確認
- [ ] 必要なロール（ACCOUNTADMIN）へのアクセス権限を確認
- [ ] Cortex AI機能が利用可能なリージョンであることを確認

### 2. 事前セットアップ（当日または前日）

参加者に事前にセットアップを完了してもらうか、ハンズオン冒頭で実施するかを決定してください。

**オプションA: 事前セットアップ（推奨）**
- セットアップ手順書を事前配布
- 当日は「✅ セットアップが完了しました！」メッセージの確認のみ

**オプションB: 当日セットアップ**
- 追加で15-20分の時間を確保
- ネットワーク負荷に注意

### 3. 資料準備

- [ ] 各モジュールのスライド（PDF）を確認
- [ ] SQLスクリプトの動作確認
- [ ] デモ用アカウントでの事前実行

---

## ⏱️ タイムテーブル例

### 半日コース（3.5時間）

| 時間 | 内容 | 備考 |
|-----|------|------|
| 0:00-0:15 | オープニング・環境確認 | 接続確認、質問対応 |
| 0:15-1:00 | Module 01: Snowflakeを始める | 基本操作の習得 |
| 1:00-1:45 | Module 02: データパイプライン | Dynamic Tables |
| 1:45-2:00 | 休憩 | |
| 2:00-2:30 | Module 03: Cortex AI | AI SQL関数 |
| 2:30-3:15 | Module 04: ガバナンス | セキュリティ重視の場合は延長 |
| 3:15-3:30 | Module 05: アプリ・連携 / クロージング | 時間調整用 |

### 1日コース（6時間）

| 時間 | 内容 | 備考 |
|-----|------|------|
| 9:00-9:30 | オープニング・セットアップ | |
| 9:30-10:30 | Module 01: Snowflakeを始める | 詳細説明付き |
| 10:30-10:45 | 休憩 | |
| 10:45-12:00 | Module 02: データパイプライン | 演習時間を追加 |
| 12:00-13:00 | 昼休憩 | |
| 13:00-14:00 | Module 03: Cortex AI | デモ重視 |
| 14:00-15:15 | Module 04: ガバナンス | 実践演習 |
| 15:15-15:30 | 休憩 | |
| 15:30-16:30 | Module 05: アプリ・連携 | Marketplace体験 |
| 16:30-17:00 | Q&A・クロージング | |

---

## 📌 モジュール別ポイント

### Module 00: セットアップ

**よくある問題:**
- S3からのデータロードに時間がかかる（5-10分）
- ロール権限のエラー → ACCOUNTADMINで実行しているか確認

**確認ポイント:**
```sql
-- データロード確認
SELECT COUNT(*) FROM tb_101.raw_pos.order_header;
-- 期待値: 約62,000,000行

-- ロール確認
SHOW ROLES LIKE 'TB_%';
```

### Module 01: Snowflakeを始める

**重要コンセプト:**
- ウェアハウスのサイズと自動スケーリング
- クエリ結果キャッシュ（Cloud Services層）
- ゼロコピークローン（メタデータのみコピー）
- Time Travel（データ保持期間内の復旧）

**デモのポイント:**
1. ウェアハウスのスケールアップ/ダウンを実演
2. 同じクエリの2回目実行でキャッシュ効果を見せる
3. UNDROPで「やってしまった！」→「復旧できた！」の体験

### Module 02: データパイプライン

**重要コンセプト:**
- 外部ステージ（S3, Azure Blob, GCS）
- VARIANTデータ型と半構造化データ
- Dynamic Tables = 宣言的ETL
- LAG設定による鮮度管理

**デモのポイント:**
1. VARIANTからのデータ抽出（コロン演算子、角括弧）
2. Dynamic Tableの自動更新を待つ（最大1分）
3. DAGの視覚化をSnowsightで見せる

**注意:**
- Dynamic Tableの更新を待つ間、解説を入れる

### Module 03: Cortex AI

**重要コンセプト:**
- SQL内でAI関数を直接呼び出せる
- センチメント分析（-1〜+1のスコア）
- 分類、回答抽出、要約の4つの主要関数

**デモのポイント:**
1. 1件のレビュー → 10,000件への拡張を見せる
2. 日本語翻訳（AI_TRANSLATE）も紹介可能
3. 結果の解釈方法を説明

**注意:**
- Cortex関数は実行に時間がかかることがある
- リージョンによって利用可能なモデルが異なる

### Module 04: ガバナンス

**重要コンセプト:**
- RBAC（ロールベースアクセス制御）
- 自動分類とタグ付け
- 動的データマスキング
- 行アクセスポリシー
- データメトリック関数（品質監視）

**デモのポイント:**
1. 同じクエリを異なるロールで実行 → 結果の違いを見せる
2. マスキング前後の比較
3. トラストセンターのUI操作

**注意:**
- ロール切り替えを頻繁に行うので、混乱しないよう注意
- 権限エラーが出やすいセクション

### Module 05: アプリとコラボレーション

**重要コンセプト:**
- Snowflake Marketplace（サードパーティデータ）
- データ共有（コピー不要、ライブアクセス）
- 外部データとの統合分析

**デモのポイント:**
1. Marketplaceからのデータ取得プロセス
2. 取得したデータと内部データの結合
3. 天気×売上の相関分析

**事前準備:**
- Weather Source、Safegraphのデータは事前に取得しておくとスムーズ

---

## 🛠️ トラブルシューティング

### よくある問題と対処法

| 問題 | 原因 | 対処法 |
|-----|------|-------|
| 「Object does not exist」エラー | セットアップ未完了 | setup.sqlを再実行 |
| 「Insufficient privileges」エラー | ロール権限不足 | 正しいロールに切り替え |
| クエリが遅い | ウェアハウスサイズ | サイズを一時的にLargeに |
| Cortex関数エラー | リージョン制限 | Cross-region設定を確認 |
| Marketplace取得エラー | ACCOUNTADMINが必要 | ロールを確認 |

### 緊急時の対応

```sql
-- 全ロールの確認
SHOW ROLES;

-- 現在のロール確認
SELECT CURRENT_ROLE();

-- ウェアハウス状態確認
SHOW WAREHOUSES;

-- データベース確認
SHOW DATABASES LIKE 'TB_101';
```

---

## 📊 参加者フィードバック収集

ハンズオン終了後に以下の項目についてフィードバックを収集することをお勧めします：

1. 各モジュールの難易度（1-5）
2. 最も役立ったモジュール
3. 追加で学びたいトピック
4. 改善点・要望

---

## 📞 サポート連絡先

技術的な問題が発生した場合：
- Snowflake サポート: support.snowflake.com
- 社内担当者: [担当者名・連絡先を記入]

---

## 更新履歴

| 日付 | バージョン | 変更内容 |
|-----|-----------|---------|
| 2025-01 | v2.0 | 初版作成 |

